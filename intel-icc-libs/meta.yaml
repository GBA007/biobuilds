{% set version = "2018.1.163" %}
{% set sha256 = "45385a9bc31ec13ef2faff382250f2fc59ba32599b49e65e13507280398c4ca7" %}

package:
  name: intel-icc-libs
  version: {{ version }}

source:
  fn: "intel-icc-libs-{{ version }}.tgz"
  url:
    - "https://software.intel.com/sites/default/files/managed/c4/23/l_comp_lib_{{ version }}_comp.cpp_redist.tgz"
    - "http://download.lab7.io/sources/intel-icc-libs-{{ version }}_{{ sha256[:10] }}.tgz"
  sha256: "{{ sha256 }}"

requirements:
  build: []
  run: []

build:
  skip: True  # [not x86_64 or not linux]
  number: 0

# Separate the Intel OpenMP libraries into their own "intel-openmp" package to
# prevent the identically-named package in the "defaults" channel from
# clobbering the files we provide (even though they're likely the same or, at
# the very least, fully compatible).
outputs:
  - name: intel-openmp
    requirements:
      build: []
      run: []
    files:
      - lib/libiomp*.so

  - name: intel-icc-libs
    requirements:
      build: []
      run:
        - intel-openmp =={{ version }}
    run_exports:
      - intel-openmp =={{ version }}
    files:
      - lib/*cilk*
      - lib/*offload*
      - lib/libchkp*
      - lib/libimf*
      - lib/libintlc*
      - lib/libirc*
      - lib/libirng*
      - lib/libistrconv*
      - lib/libmpx*
      - lib/libpdbx*
      - lib/libsvml*

about:
  summary: "Redistributable runtime libraries for the Intel C/C++ Compiler"
  license: "EULA for the Intel(R) Compiler Runtime Libraries"
  license_file: "license.txt"
