{% set version = "2018.0.128" %}

package:
  name: intel-icc-libs
  version: {{ version }}

source:
  fn: "intel-icc-libs-{{ version }}.tgz"
  url:
    - "https://software.intel.com/sites/default/files/managed/f9/f4/l_comp_lib_{{ version }}_comp.cpp_redist.tgz"
    - "http://download.lab7.io/sources/intel-icc-libs-{{ version }}.tgz"
  sha256: "8e2abef5021f4f7e2d93056ce5945e897f8ea131ce7e2b22db3aa8d9d0625d7c"

requirements:
  build: []
  run: []

build:
  skip: True  # [not x86_64 or not linux]
  number: 1

# Separate the Intel OpenMP libraries into their own "intel-openmp" package to
# prevent the identically-named package in the "defaults" channel from
# clobbering the files we provide (even though they're likely the same or, at
# the very least, fully compatible).
outputs:
  - name: intel-openmp
    requirements:
      build: []
      run: []
    files:
      - lib/libiomp*.so

  - name: intel-icc-libs
    requirements:
      build: []
      run:
        - intel-openmp =={{ version }}
    run_exports:
      - intel-openmp =={{ version }}
    files:
      - lib/*cilk*
      - lib/*offload*
      - lib/libchkp*
      - lib/libimf*
      - lib/libintlc*
      - lib/libirc*
      - lib/libirng*
      - lib/libistrconv*
      - lib/libmpx*
      - lib/libpdbx*
      - lib/libsvml*

about:
  summary: "Redistributable runtime libraries for the Intel C/C++ Compiler"
  license: "EULA for the Intel(R) Compiler Runtime Libraries"
  license_file: "license.txt"
